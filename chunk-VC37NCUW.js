import{a as X}from"./chunk-65VKCHXJ.js";import{a as Y}from"./chunk-KHJ2TH4N.js";import{a as Q}from"./chunk-UXH2HGWJ.js";import"./chunk-LKVIN4NJ.js";import"./chunk-KR3XK5MS.js";import"./chunk-XQJPQ7LG.js";import"./chunk-LB2I43TM.js";import{w as a}from"./chunk-KRWE5CTW.js";import{B,Bb as z,C as I,Ga as $,H as v,I as S,Ia as w,Ka as b,O as h,P as H,Rb as J,Ta as U,Va as R,Xa as s,Y as c,Ya as M,Za as P,_a as j,ca as K,i as F,jb as G,kb as q,qa as g,ra as _,tb as k,ua as L,va as W,wa as E,xa as r,y as D,ya as o,za as T}from"./chunk-YWXTHJOJ.js";import{h as u}from"./chunk-CIWMVH6F.js";var Z=(()=>{class t{get keplr(){return globalThis?.keplr}isAvailable(){return!!this.keplr}connect(){return u(this,null,function*(){let e=this.keplr;if(!e)throw new Error("Keplr extension not found");return yield e.experimentalSuggestChain({chainId:a.cosmos.chainId,chainName:a.cosmos.chainName,rpc:a.cosmos.rpc,rest:a.cosmos.rest,bip44:{coinType:118},bech32Config:{bech32PrefixAccAddr:a.cosmos.bech32Prefix.accAddr,bech32PrefixAccPub:a.cosmos.bech32Prefix.accPub,bech32PrefixValAddr:a.cosmos.bech32Prefix.valAddr,bech32PrefixValPub:a.cosmos.bech32Prefix.valPub,bech32PrefixConsAddr:a.cosmos.bech32Prefix.consAddr,bech32PrefixConsPub:a.cosmos.bech32Prefix.consPub},currencies:[{coinDenom:a.cosmos.coin.denom,coinMinimalDenom:a.cosmos.coin.minimalDenom,coinDecimals:a.cosmos.coin.decimals}],feeCurrencies:[{coinDenom:a.cosmos.coin.denom,coinMinimalDenom:a.cosmos.coin.minimalDenom,coinDecimals:a.cosmos.coin.decimals,gasPriceStep:{low:a.cosmos.gasPrice.low,average:a.cosmos.gasPrice.average,high:a.cosmos.gasPrice.high}}],stakeCurrency:{coinDenom:a.cosmos.coin.denom,coinMinimalDenom:a.cosmos.coin.minimalDenom,coinDecimals:a.cosmos.coin.decimals},features:[]}),yield e.enable(a.cosmos.chainId),(yield e.getKey(a.cosmos.chainId)).bech32Address})}getSigner(){return u(this,null,function*(){let e=this.keplr;if(!e)throw new Error("Keplr extension not found");yield e.enable(a.cosmos.chainId);let i=typeof e.getOfflineSignerDirect=="function"?e.getOfflineSignerDirect(a.cosmos.chainId):typeof e.getOfflineSignerAuto=="function"?yield e.getOfflineSignerAuto(a.cosmos.chainId):globalThis.getOfflineSigner?.(a.cosmos.chainId);if(!i||typeof i.getAccounts!="function")throw new Error("Keplr signer not available");return i})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ee=(()=>{class t{constructor(e){this.keplr=e,this.id="keplr",this.title="Keplr"}isAvailable(){return this.keplr.isAvailable()}connect(){return u(this,null,function*(){let e=yield this.keplr.connect();return{walletId:this.id,account:{address:e}}})}getSigner(){return this.keplr.getSigner()}disconnect(){return u(this,null,function*(){})}static{this.\u0275fac=function(i){return new(i||t)(B(Z))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="wallet:last",ie=(()=>{class t{constructor(e){this.status=h("disconnected"),this.walletId=h(""),this.address=h(""),this.error=h(""),this.isConnected=k(()=>this.status()==="connected"&&!!this.address()),this.adapters=[e]}getAvailableWallets(){return this.adapters.filter(e=>e.isAvailable()).map(e=>({id:e.id,title:e.title}))}connect(){return u(this,arguments,function*(e=this.getDefaultWalletId()){this.error.set(""),this.status.set("connecting");try{let n=yield this.getAdapter(e).connect();this.walletId.set(n.walletId),this.address.set(n.account.address),this.status.set("connected"),this.saveLastWallet(n.walletId)}catch(i){this.status.set("error"),this.error.set(this.formatErr(i)),this.walletId.set(""),this.address.set("")}})}disconnect(){return u(this,null,function*(){this.error.set("");try{let e=this.walletId();e&&(yield this.getAdapter(e).disconnect())}finally{this.status.set("disconnected"),this.walletId.set(""),this.address.set("")}})}getSigner(){return u(this,null,function*(){let e=this.walletId();if(!e)throw new Error("Wallet not connected");return this.getAdapter(e).getSigner()})}getAdapter(e){let i=this.adapters.find(n=>n.id===e);if(!i)throw new Error(`Wallet adapter not found: ${e}`);if(!i.isAvailable())throw new Error(`${i.title} is not available`);return i}getDefaultWalletId(){let e=this.loadLastWallet();if(e&&this.adapters.some(n=>n.id===e&&n.isAvailable()))return e;let i=this.adapters.find(n=>n.isAvailable());if(!i)throw new Error("No supported wallet found");return i.id}saveLastWallet(e){try{localStorage.setItem(te,e)}catch{}}loadLastWallet(){try{return localStorage.getItem(te)??null}catch{return null}}formatErr(e){return e instanceof Error?e.message:typeof e=="string"?e:JSON.stringify(e)}static{this.\u0275fac=function(i){return new(i||t)(B(ee))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ne=(()=>{class t{constructor(){this.http=I(J),this.wallet=I(ie),this.isConnecting=h(!1),this.isSending=h(!1),this.address=this.wallet.address,this.minimalBalance=h(0n),this.toAddress=h(""),this.amount=h("0.000001"),this.txHash=h(""),this.error=h(""),this.isLoadingTxs=h(!1),this.txs=h([]),this.balance=k(()=>{let e=BigInt(10**a.cosmos.coin.decimals),i=this.minimalBalance()/e,n=this.minimalBalance()%e;return`${i}.${n.toString().padStart(a.cosmos.coin.decimals,"0")}`}),H(()=>{let e=this.address();e&&!this.toAddress()&&this.toAddress.set(e)})}connectKeplr(){return u(this,null,function*(){this.error.set(""),this.txHash.set(""),this.isConnecting.set(!0);try{yield this.wallet.connect("keplr"),yield this.refreshBalance(),yield this.refreshTransactions()}catch(e){this.error.set(this.formatErr(e))}finally{this.isConnecting.set(!1)}})}refreshBalance(){return u(this,null,function*(){this.error.set("");let e=this.address();if(e)try{let i=`${a.cosmos.rest}/cosmos/bank/v1beta1/balances/${encodeURIComponent(e)}`,m=((yield F(this.http.get(i)))?.balances??[]).find(p=>p.denom===a.cosmos.coin.minimalDenom)?.amount??"0";this.minimalBalance.set(BigInt(m))}catch(i){this.error.set(this.formatErr(i))}})}refreshTransactions(e=20){return u(this,null,function*(){this.error.set("");let i=this.address();if(i){this.isLoadingTxs.set(!0);try{let[n,d]=yield Promise.all([this.fetchTxsByEvent(`transfer.recipient='${i}'`,e),this.fetchTxsByEvent(`transfer.sender='${i}'`,e)]),m=new Map;for(let f of[...n,...d])m.set(f.hash,f);let p=Array.from(m.values()).sort((f,C)=>C.height-f.height);this.txs.set(p)}catch(n){this.error.set(this.formatErr(n))}finally{this.isLoadingTxs.set(!1)}}})}fetchTxsByEvent(e,i){return u(this,null,function*(){let n=`${a.cosmos.rest}/cosmos/tx/v1beta1/txs?query=${encodeURIComponent(e)}&pagination.limit=${encodeURIComponent(String(i))}&order_by=ORDER_BY_DESC`,d=yield F(this.http.get(n)),m=d?.txs??[],p=d?.tx_responses??[],f=[];for(let C=0;C<Math.min(m.length,p.length);C++){let A=m[C]??{},y=p[C]??{},x=this.parseFirstMsgSend(A);if(!x)continue;let N=String(y.txhash??"").toUpperCase();if(!N)continue;let se=Number(y.height??0),ae=String(y.timestamp??""),re=Number(y.code??0)===0,V=this.address(),ce=x.from===V&&x.to===V?"self":x.to===V?"in":"out";f.push({hash:N,height:se,timestamp:ae,success:re,direction:ce,from:x.from,to:x.to,amountMinimal:x.amountMinimal,memo:String(A?.body?.memo??"")})}return f})}parseFirstMsgSend(e){let i=e?.body?.messages??[];for(let n of i){let d=n?.["@type"]??n?.type_url??"";if(!(d==="/cosmos.bank.v1beta1.MsgSend"||d==="cosmos.bank.v1beta1.MsgSend"))continue;let p=String(n?.from_address??""),f=String(n?.to_address??""),A=(n?.amount??[]).find(N=>N?.denom===a.cosmos.coin.minimalDenom),y=String(A?.amount??"0"),x=0n;try{x=BigInt(y)}catch{x=0n}return{from:p,to:f,amountMinimal:x}}return null}send(){return u(this,null,function*(){this.error.set(""),this.txHash.set("");let e=this.address().trim(),i=this.toAddress().trim(),n=this.amount().trim();if(!e){this.error.set("Connect wallet first.");return}if(!i){this.error.set("To address is required.");return}let d;try{d=this.mainToMinimal(n)}catch{this.error.set(`Amount must be a number like 1, 0.5, 0.${"0".repeat(a.cosmos.coin.decimals-1)}1`);return}if(d<=0n){this.error.set("Amount must be > 0");return}this.isSending.set(!0);try{let{SigningStargateClient:m,GasPrice:p}=yield import("./chunk-7T3SOACY.js"),f=yield this.wallet.getSigner(),C=a.cosmos.defaultGasPriceString??`${a.cosmos.gasPrice.average}${a.cosmos.coin.minimalDenom}`,y=yield(yield m.connectWithSigner(a.cosmos.rpc,f,{gasPrice:p.fromString(C)})).sendTokens(e,i,[{denom:a.cosmos.coin.minimalDenom,amount:d.toString()}],"auto","uagd transfer");this.txHash.set(y.transactionHash||""),yield this.refreshBalance(),yield this.refreshTransactions()}catch(m){this.error.set(this.formatErr(m))}finally{this.isSending.set(!1)}})}mainToMinimal(e){let i=e.replace(",",".");if(!/^\d+(\.\d+)?$/.test(i))throw new Error("bad number");let[n,d=""]=i.split("."),m="0".repeat(a.cosmos.coin.decimals),p=(d+m).slice(0,a.cosmos.coin.decimals),f=BigInt(10**a.cosmos.coin.decimals);return BigInt(n)*f+BigInt(p)}formatErr(e){if(e instanceof Error)return e.message;if(e&&typeof e=="object"){let i=e,n=i?.error?.message??i?.message??i?.toString?.();if(typeof n=="string")return n;try{return JSON.stringify(i)}catch{return String(i)}}return String(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var me=()=>({text:"Get started"}),he=t=>[t],pe=(t,l)=>l.hash;function ue(t,l){t&1&&s(0," connecting\u2026 ")}function fe(t,l){t&1&&s(0," connect Keplr ")}function ge(t,l){t&1&&s(0," loading txs\u2026 ")}function _e(t,l){t&1&&s(0," refresh txs ")}function be(t,l){t&1&&s(0," sending\u2026 ")}function xe(t,l){t&1&&s(0," send ")}function Ce(t,l){if(t&1&&(r(0,"div")(1,"b"),s(2,"tx hash:"),o(),r(3,"code"),s(4),o()()),t&2){let e=b(2);c(4),M(e.txHash())}}function ve(t,l){t&1&&(r(0,"div",28),s(1,"no transactions found"),o())}function Se(t,l){t&1&&s(0," in ")}function we(t,l){t&1&&s(0," out ")}function ye(t,l){t&1&&s(0," self ")}function De(t,l){t&1&&s(0," ok ")}function Ee(t,l){t&1&&s(0," fail ")}function Ie(t,l){if(t&1&&(r(0,"div",32)(1,"b"),s(2,"memo:"),o(),s(3),o()),t&2){let e=b().$implicit;c(3),P(" ",e.memo," ")}}function Te(t,l){if(t&1&&(r(0,"div",34),s(1),o()),t&2){let e=b().$implicit;c(),M(e.timestamp)}}function Me(t,l){if(t&1&&(r(0,"div",30)(1,"div",24)(2,"b"),g(3,Se,1,0)(4,we,1,0)(5,ye,1,0),o(),r(6,"span",31),s(7),o(),r(8,"span",31),g(9,De,1,0)(10,Ee,1,0),o()(),r(11,"div",32)(12,"b"),s(13,"from:"),o(),r(14,"code"),s(15),o()(),r(16,"div",32)(17,"b"),s(18,"to:"),o(),r(19,"code"),s(20),o()(),r(21,"div")(22,"b"),s(23,"amount:"),o(),s(24),o(),g(25,Ie,4,1,"div",32),r(26,"div",33)(27,"b"),s(28,"hash:"),o(),r(29,"code"),s(30),o()(),g(31,Te,2,1,"div",34),o()),t&2){let e=l.$implicit;c(3),_(e.direction==="in"?3:e.direction==="out"?4:5),c(4),P("height: ",e.height),c(2),_(e.success?9:10),c(6),M(e.from),c(5),M(e.to),c(4),j(" ",e.amountMinimal," "," ","uuag "),c(),_(e.memo?25:-1),c(5),M(e.hash),c(),_(e.timestamp?31:-1)}}function ke(t,l){if(t&1&&(r(0,"div",29),L(1,Me,32,10,"div",30,pe),o()),t&2){let e=b(2);c(),W(e.txs())}}function Ae(t,l){if(t&1){let e=$();r(0,"div")(1,"b"),s(2,"address:"),o(),s(3),o(),r(4,"div")(5,"b"),s(6,"balance:"),o(),s(7),o(),r(8,"div",24)(9,"button",25),w("click",function(){v(e);let n=b();return S(n.refreshBalance())}),s(10," refresh balance "),o(),r(11,"button",22),w("click",function(){v(e);let n=b();return S(n.refreshTransactions())}),g(12,ge,1,0)(13,_e,1,0),o()(),T(14,"hr"),r(15,"label",26)(16,"div")(17,"b"),s(18,"to wallet"),o()(),r(19,"input",27),w("input",function(n){v(e);let d=b();return S(d.toAddress.set(n.target.value))}),o()(),r(20,"label",26)(21,"div")(22,"b"),s(23,"amount (UAG)"),o()(),r(24,"input",27),w("input",function(n){v(e);let d=b();return S(d.amountUag.set(n.target.value))}),o()(),r(25,"button",22),w("click",function(){v(e);let n=b();return S(n.send())}),g(26,be,1,0)(27,xe,1,0),o(),g(28,Ce,5,1,"div"),T(29,"hr"),r(30,"div",26)(31,"div")(32,"b"),s(33,"transactions"),o()(),g(34,ve,2,0,"div",28)(35,ke,3,0,"div",29),o()}if(t&2){let e=b();c(3),P(" ",e.address()),c(4),j(" ",e.uag()," UAG (",e.uuag()," uuag)"),c(4),E("disabled",e.isLoadingTxs()),c(),_(e.isLoadingTxs()?12:13),c(7),E("value",e.toAddress()),c(5),E("value",e.amountUag()),c(),E("disabled",e.isSending()),c(),_(e.isSending()?26:27),c(2),_(e.txHash()?28:-1),c(6),_(e.txs().length?35:34)}}function Pe(t,l){if(t&1&&(r(0,"div",23)(1,"b"),s(2,"error:"),o(),s(3),o()),t&2){let e=b();c(3),P(" ",e.error())}}var oe=(()=>{class t{constructor(){this._cdr=I(z),this.isMenuOpen=h(!1),this.cosmos=I(ne),this.isConnecting=this.cosmos.isConnecting,this.isSending=this.cosmos.isSending,this.address=this.cosmos.address,this.uuag=this.cosmos.minimalBalance,this.uag=this.cosmos.balance,this.toAddress=this.cosmos.toAddress,this.amountUag=this.cosmos.amount,this.txHash=this.cosmos.txHash,this.isLoadingTxs=this.cosmos.isLoadingTxs,this.txs=this.cosmos.txs,this.error=this.cosmos.error,this.isConnected=k(()=>!!this.address())}ngOnInit(){this._cdr.detectChanges()}connectKeplr(){return this.cosmos.connectKeplr()}refreshBalance(){return this.cosmos.refreshBalance()}refreshTransactions(){return this.cosmos.refreshTransactions()}send(){return this.cosmos.send()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=K({type:t,selectors:[["ng-component"]],decls:38,vars:10,consts:[["burger",""],[1,"space"],["aria-label","Page header",1,"space__header"],[1,"space__header-left"],[1,"space__header-title"],[1,"space__header-right"],[3,"updated"],["aria-label","Sidebar",1,"space__sidebar"],["type","button","aria-label","Close sidebar",1,"space__sidebar-close",3,"click"],[1,"material-icons"],[1,"space__sidebar-content"],[1,"space__sidebar-row","space__sidebar-row--end"],[1,"material-icons","edit"],[1,"material-icons","delete"],[1,"space__sidebar-img"],["src","assets/default.png","alt",""],[1,"space__sidebar-title"],[1,"space__sidebar-desc"],[1,"space__sidebar-row"],[1,"space__main"],["title","Build anything faster","description","One modular layout to cover product, content, and commerce pages.","mediaUrl","assets/default.png",3,"buttons"],[2,"padding","16px","display","grid","gap","10px","max-width","560px"],["type","button",3,"click","disabled"],[2,"color","#ff6b6b"],[2,"display","flex","gap","8px","flex-wrap","wrap"],["type","button",3,"click"],[2,"display","grid","gap","6px"],["type","text",3,"input","value"],[2,"opacity","0.7"],[2,"display","grid","gap","8px"],[2,"padding","10px","border","1px solid #333","border-radius","8px"],[2,"opacity","0.8"],[2,"opacity","0.9"],[2,"opacity","0.85"],[2,"opacity","0.75"]],template:function(i,n){if(i&1){let d=$();r(0,"div",1)(1,"header",2)(2,"div",3),T(3,"user-preview"),o(),r(4,"div",4),s(5,"Title header"),o(),r(6,"div",5)(7,"icon-burger",6,0),w("updated",function(p){return v(d),S(n.isMenuOpen.set(p))}),o()()(),r(9,"aside",7)(10,"button",8),w("click",function(){v(d);let p=U(8);return S(p.toggle())}),r(11,"span",9),s(12,"close"),o()(),r(13,"div",10)(14,"div",11)(15,"span",12),s(16,"edit"),o(),r(17,"span",13),s(18,"delete"),o()(),r(19,"div",14),T(20,"img",15),o(),r(21,"div",16),s(22,"Title of sidebar..."),o(),r(23,"div",17),s(24," Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint molestiae consequatur quae. Modi corporis rem amet tempore debitis assumenda minima repellat labore expedita quam. Itaque accusamus culpa ullam necessitatibus nisi. "),o(),r(25,"div",18)(26,"span",9),s(27,"delete"),o(),r(28,"span"),s(29,"Hello world"),o()()()(),r(30,"main",19),T(31,"page-hero",20),r(32,"div",21)(33,"button",22),w("click",function(){return v(d),S(n.connectKeplr())}),g(34,ue,1,0)(35,fe,1,0),o(),g(36,Ae,36,11),g(37,Pe,4,1,"div",23),o()()()}i&2&&(R("space--open",n.isMenuOpen()),c(31),E("buttons",q(8,he,G(7,me))),c(2),E("disabled",n.isConnecting()),c(),_(n.isConnecting()?34:35),c(2),_(n.address()?36:-1),c(),_(n.error()?37:-1))},dependencies:[Q,Y,X],encapsulation:2,changeDetection:0})}}return t})();var ot=[{path:"",component:oe}];export{ot as dashboardRoutes};
