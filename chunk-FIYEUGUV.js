import"./chunk-T6CMCPX7.js";import"./chunk-UMYXIEMT.js";import"./chunk-XMVVDJ4N.js";import"./chunk-A46T6KCN.js";import"./chunk-IKSPIF3S.js";import{c as V}from"./chunk-3SNXAVZY.js";import{a as D,b as F,c as T,e as G,f as M}from"./chunk-RB45GIYM.js";import"./chunk-UXH2HGWJ.js";import{a as j}from"./chunk-LKVIN4NJ.js";import{a as Z}from"./chunk-KR3XK5MS.js";import"./chunk-XQJPQ7LG.js";import"./chunk-LB2I43TM.js";import{r as U,w as x,y as N}from"./chunk-KRWE5CTW.js";import{Aa as o,Ba as s,C as c,Ca as r,Ia as S,J as O,Ka as w,O as y,Ua as k,W as P,Xa as p,Y as a,_b as z,ca as C,na as u,oa as h,qa as f,ra as v,tb as L,wa as b,wb as g,xa as l,ya as m,za as d}from"./chunk-YWXTHJOJ.js";import"./chunk-CIWMVH6F.js";var B=(()=>{class i{constructor(){this.width=g(""),this.height=g(""),this.start=g(""),this.end=g("")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=C({type:i,selectors:[["icon-spider"]],hostAttrs:[1,"spider"],hostVars:8,hostBindings:function(t,n){t&2&&k("--spider-w",n.width)("--spider-h",n.height)("--spider-start",n.start)("--spider-end",n.end)},inputs:{width:[1,"width"],height:[1,"height"],start:[1,"start"],end:[1,"end"]},decls:30,vars:0,consts:[["preserveAspectRatio","xMidYMid meet","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 72 84","fill","none",1,"spider__svg"],["d","M29.7441 38.2845C29.7441 38.2845 31.8474 35.0824 33.6034 33.46C35.2166 31.9737 35.9191 31.6079 36.0232 31.5575C36.1314 31.6079 36.8298 31.9737 38.443 33.46C40.1991 35.0824 42.3025 38.2845 42.3025 38.2845C42.3025 38.2845 47.196 35.9266 47.196 29.1802C47.196 22.4337 42.8736 18.9516 42.8736 18.9516C47.9679 27.7872 43.1013 33.2694 43.1013 33.2694C43.1013 33.2694 42.1364 33.1137 40.3998 31.0165C39.0996 29.5517 37.6333 28.246 36.031 27.126V27.1064V27.126C34.4245 28.2391 32.953 29.5384 31.6468 30.9971C29.9139 33.0942 28.9452 33.2498 28.9452 33.2498C28.9452 33.2498 24.0746 27.7679 29.1691 18.9321C29.1691 18.9321 24.8504 22.3948 24.8504 29.1607C24.8504 35.9266 29.7441 38.2845 29.7441 38.2845Z","fill","url(#paint0_linear_5_30)"],["d","M31.1333 41.3775C30.7938 44.101 32.322 45.2097 32.322 45.2097C32.3393 44.5685 32.4233 43.9308 32.5729 43.3072C32.7736 42.7159 33.8967 41.3618 35.0583 41.3618H36.988C38.1459 41.3618 39.2727 42.7003 39.4772 43.3072C39.6241 43.9312 39.707 44.5688 39.7242 45.2097C39.7242 45.2097 41.268 44.101 40.9167 41.3775C40.5965 38.8135 36.5132 35.3236 36.0464 34.9306V34.8917H36.0232H36V34.9306C35.533 35.3236 31.4499 38.8135 31.1333 41.3775Z","fill","url(#paint1_linear_5_30)"],["d","M43.2673 45.91C42.5186 47.5046 41.2429 48.7867 39.6587 49.5362C39.6587 49.5362 36.2085 44.7117 36.0386 44.5639V44.5406V44.5639C35.8688 44.7117 32.4224 49.5362 32.4224 49.5362C30.8254 48.7934 29.5365 47.5106 28.7792 45.91C27.6832 43.3578 28.7792 40.0742 28.7792 40.0742C27.8222 40.9534 25.823 45.91 28.0074 49.7775C28.644 50.9108 29.5247 51.8858 30.5848 52.6305C31.6448 53.3753 32.857 53.8708 34.1322 54.0805C34.1322 54.0805 33.395 52.9756 34.0125 51.1587C34.3557 50.1073 35.0716 49.2207 36.0232 48.6687C36.9748 49.2207 37.6907 50.1073 38.034 51.1587C38.6552 52.9756 37.9143 54.0805 37.9143 54.0805C39.1933 53.8718 40.4095 53.3761 41.473 52.6299C42.5364 51.8838 43.4201 50.9063 44.0583 49.7696C46.2235 45.879 44.2244 40.9456 43.2866 40.0663C43.2673 40.0742 44.3827 43.3578 43.2673 45.91Z","fill","url(#paint2_linear_5_30)"],["d","M18.7064 30.4135C19.2274 31.2189 25.8191 39.9729 25.8191 39.9729C25.8191 39.9729 27.1042 37.4868 25.9232 36.0005C24.7424 34.5144 21.5507 30.3474 20.9486 29.363C20.4509 28.4918 20.1627 27.515 20.1073 26.5111C20.034 25.6902 19.0767 14.6757 19.0767 14.6757C19.8965 11.6482 21.2001 8.77554 22.9362 6.17063C24.3439 4.00548 25.9018 1.94346 27.5982 0C27.5982 0 23.0403 3.23317 20.4314 7.2717C18.8838 9.64045 17.6645 12.2114 16.8074 14.913C16.8074 14.913 17.4134 24.6125 17.5407 26.5189C17.5809 27.8983 17.9831 29.2421 18.7064 30.4135Z","fill","url(#paint3_linear_5_30)"],["d","M19.0923 59.368C19.0923 59.368 19.0923 57.6639 20.1227 54.7848C21.1531 51.9056 24.7539 45.416 24.7539 45.416L25.0279 40.8056L24.3139 39.8095C24.3139 39.8095 19.096 37.7863 16.9811 36.6464C14.8663 35.5064 14.3105 35.1952 14.3105 35.1952C13.5116 33.6583 12.8328 32.0608 12.2805 30.4174C11.1922 27.3555 10.7599 25.9625 10.7599 25.9625C10.5214 22.9704 10.4609 19.9668 10.5785 16.9673C10.7599 11.781 11.0301 10.1158 11.0301 10.1158C11.0301 10.1158 9.72946 12.0067 9.15056 16.4031C8.57166 20.7996 8.44816 26.2622 8.44816 26.2622L11.7054 36.6152C11.7054 36.6152 14.407 38.4827 17.9074 40.4204C19.0234 41.0646 20.2047 41.5863 21.431 41.9767L12.4464 43.3735L3.91342 50.7658C2.51875 53.6073 1.48155 56.6135 0.825943 59.7142C-0.277831 64.9084 0.0540732 70.581 0.0540732 70.581C0.0540732 70.581 1.39713 64.9084 2.99104 59.8194C4.58495 54.7304 5.95501 52.3647 5.95501 52.3647L13.6737 46.3343L19.787 45.7468L15.0708 57.8078C15.0708 57.8078 15.0283 59.3641 15.7037 62.8657C16.3792 66.3673 19.266 75.67 19.266 75.67L26.6296 84L27.3397 83.8715L21.7822 74.6156L19.0923 59.368Z","fill","url(#paint4_linear_5_30)"],["d","M52.923 14.6757C52.923 14.6757 51.9659 25.6786 51.8888 26.5111C51.8333 27.515 51.5451 28.4918 51.0475 29.363C50.4492 30.3513 47.2537 34.5105 46.0728 36.0005C44.8918 37.4907 46.1769 39.9729 46.1769 39.9729C46.1769 39.9729 52.7725 31.2189 53.2936 30.4135C54.0144 29.2429 54.4139 27.9002 54.4514 26.5228C54.5826 24.6164 55.1886 14.9169 55.1886 14.9169C54.3296 12.216 53.1105 9.64533 51.5646 7.27559C48.9596 3.23317 44.4017 0 44.4017 0C46.1041 1.94244 47.6672 4.00452 49.0791 6.17063C50.8088 8.7772 52.1069 11.6496 52.923 14.6757Z","fill","url(#paint5_linear_5_30)"],["d","M71.1821 59.7027C70.5274 56.6015 69.4902 53.5952 68.0945 50.7541L59.5576 43.3617L50.5576 41.9689C51.7828 41.5784 52.9627 41.0566 54.0774 40.4126C57.5932 38.4673 60.2833 36.6075 60.2833 36.6075L63.5366 26.2544C63.5366 26.2544 63.4132 20.8074 62.8343 16.3992C62.2554 11.9911 60.9779 10.1158 60.9779 10.1158C60.9779 10.1158 61.248 11.7771 61.4295 16.9634C61.5448 19.9628 61.4841 22.9665 61.248 25.9586C61.248 25.9586 60.8081 27.3516 59.7313 30.4135C59.179 32.0569 58.5003 33.6544 57.7014 35.1913C57.7014 35.1913 57.1456 35.4986 55.0307 36.6425C52.9158 37.7863 47.6979 39.8056 47.6979 39.8056L46.9839 40.8017L47.2541 45.4121C47.2541 45.4121 50.8664 51.9017 51.8853 54.7808C52.9041 57.66 52.9158 59.3641 52.9158 59.3641L50.2142 74.6117L44.6528 83.8715L45.3629 84L52.7305 75.6778C52.7305 75.6778 55.6134 66.3868 56.2927 62.8735C56.972 59.3603 56.9256 57.8156 56.9256 57.8156L52.2094 45.7544L58.3189 46.3419L66.0375 52.3725C66.0375 52.3725 67.4115 54.738 69.0054 59.8272C70.5993 64.9162 71.9423 70.5888 71.9423 70.5888C71.9423 70.5888 72.2896 64.8967 71.1821 59.7027Z","fill","url(#paint6_linear_5_30)"],["id","paint0_linear_5_30","x1","36.0232","y1","18.9321","x2","36.0232","y2","38.2845","gradientUnits","userSpaceOnUse"],["stop-color","#F6C93C"],["offset","1","stop-color","#A79F1E"],["id","paint1_linear_5_30","x1","36.0264","y1","34.8917","x2","36.0264","y2","45.2097","gradientUnits","userSpaceOnUse"],["id","paint2_linear_5_30","x1","36.0264","y1","40.0663","x2","36.0264","y2","54.0805","gradientUnits","userSpaceOnUse"],["id","paint3_linear_5_30","x1","22.2029","y1","0","x2","22.2029","y2","39.9729","gradientUnits","userSpaceOnUse"],["id","paint4_linear_5_30","x1","13.6735","y1","10.1158","x2","13.6735","y2","84","gradientUnits","userSpaceOnUse"],["id","paint5_linear_5_30","x1","49.7951","y1","0","x2","49.7951","y2","39.9729","gradientUnits","userSpaceOnUse"],["id","paint6_linear_5_30","x1","58.3234","y1","10.1158","x2","58.3234","y2","84","gradientUnits","userSpaceOnUse"]],template:function(t,n){t&1&&(O(),o(0,"svg",0),r(1,"path",1)(2,"path",2)(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),o(8,"defs")(9,"linearGradient",8),r(10,"stop",9)(11,"stop",10),s(),o(12,"linearGradient",11),r(13,"stop",9)(14,"stop",10),s(),o(15,"linearGradient",12),r(16,"stop",9)(17,"stop",10),s(),o(18,"linearGradient",13),r(19,"stop",9)(20,"stop",10),s(),o(21,"linearGradient",14),r(22,"stop",9)(23,"stop",10),s(),o(24,"linearGradient",15),r(25,"stop",9)(26,"stop",10),s(),o(27,"linearGradient",16),r(28,"stop",9)(29,"stop",10),s()()())},styles:[".spider[_ngcontent-%COMP%]{--spider-w: 100%;--spider-h: auto;display:inline-block;inline-size:var(--spider-w);block-size:var(--spider-h);line-height:0}.spider__svg[_ngcontent-%COMP%]{display:block;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;aspect-ratio:72/84}"]})}}return i})();function A(i,_){if(i&1&&d(0,"img",3),i&2){let e=w();b("src",e.logo,P)}}function I(i,_){i&1&&d(0,"icon-spider",4)}function R(i,_){i&1&&p(0," dark_mode ")}function J(i,_){i&1&&p(0," light_mode ")}function W(i,_){if(i&1&&(d(0,"winput",13),u()),i&2){let e=w();h(e.signForm.resetPin)}}var Y=T(i=>{M(i.email,{message:"Enter your email..."}),G(i.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/),M(i.password,{message:"Enter your password..."})}),ge=(()=>{class i{constructor(){this.userService=c(j),this._alertService=c(Z),this._httpService=c(U),this._router=c(z),this.logo=x.sign.logo,this.signModel=y({email:x.sign.email,password:x.sign.password,resetPin:""}),this.signForm=D(this.signModel,Y),this.showCode=y(!1),this.isSubmitDisabled=L(()=>{let e=this.signForm().invalid();if(!this.showCode())return e;let t=this.signForm.resetPin();return e||t.invalid()})}wFormSubmit(){F(this.signForm,e=>{let t=e().value();return this.showCode()?this._change(t):this._submit(t),Promise.resolve({})})}_submit(e){this._httpService.post("/api/user/status",e,t=>{t.email&&t.pass?this._login(e):t.email?this._request(e):this._sign(e)})}_login(e){this._httpService.post("/api/user/login",e,this._set.bind(this))}_sign(e){this._httpService.post("/api/user/sign",e,this._set.bind(this))}_request(e){this._httpService.post("/api/user/request",e,()=>{this.showCode.set(!0),this._alertService.info({text:"Mail will be sent to your email"})})}_change(e){this._httpService.post("/api/user/change",e,t=>{t?this._alertService.info({text:"Password successfully changed"}):this._alertService.error({text:"Wrong code"}),this._login(e)})}_set(e){if(!e){this._alertService.error({text:"Something went wrong"});return}let t=e.token||"";t&&this._httpService.set("token",t),localStorage.setItem("waw_user",JSON.stringify(e)),this.userService.setUser(e),this.userService.get(),this._router.navigateByUrl("/profile")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=C({type:i,selectors:[["ng-component"]],decls:19,vars:9,consts:[[1,"sign","grid","g-4"],[1,"sign__col","sign__col--left"],["aria-label","Toggle theme","type","button",1,"sign__brand",3,"click"],["alt","Logo",1,"sign__logo","sign__logo--img",3,"src"],[1,"sign__logo","sign__logo--icon"],[1,"sign__col","sign__col--right"],[1,"sign__card","shadow","rounded-card"],["aria-label","Toggle theme","type","button",1,"sign__theme",3,"click"],[1,"material-icons"],[1,"sign__title","fs-6","lh-1","fw-700","ls-normal","ta-l"],[1,"sign__fields","stack",3,"submit"],["placeholder","Enter your email...","type","email",3,"field","focused"],["placeholder","Enter your password...","type","password",3,"field"],["placeholder","Enter code from mailbox...","type","number",3,"field"],["type","primary",1,"mt-2",3,"disabled"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"button",2),S("click",function(){return n.userService.toggleTheme()}),f(3,A,1,1,"img",3)(4,I,1,0,"icon-spider",4),m()(),l(5,"div",5)(6,"div",6)(7,"button",7),S("click",function(){return n.userService.toggleTheme()}),l(8,"span",8),f(9,R,1,0)(10,J,1,0),m()(),l(11,"h1",9),p(12," Sign In / Sign Up "),m(),l(13,"form",10),S("submit",function(H){return n.wFormSubmit(),H.preventDefault()}),d(14,"winput",11),u(),d(15,"winput",12),u(),f(16,W,1,2,"winput",13),l(17,"wbutton",14),p(18," Let's go "),m()()()()()),t&2&&(a(3),v(n.logo?3:4),a(6),v(n.userService.theme()==="dark"?9:10),a(5),h(n.signForm.email),b("focused",!0),a(),h(n.signForm.password),a(),v(n.showCode()?16:-1),a(),b("disabled",n.isSubmitDisabled()))},dependencies:[B,V,N],styles:[".sign[_ngcontent-%COMP%]{--cols: 2;min-block-size:100dvh;align-items:stretch;padding:var(--sp-6)}.sign__col[_ngcontent-%COMP%]{display:flex;min-inline-size:0}.sign__col--left[_ngcontent-%COMP%]{grid-column:1;align-items:center;justify-content:flex-end;padding-inline-end:var(--sp-8)}.sign__col--right[_ngcontent-%COMP%]{grid-column:2;align-items:center;justify-content:flex-start;padding-inline-start:var(--sp-8)}.sign__brand[_ngcontent-%COMP%]{background:none;border:0;cursor:pointer;padding:0;display:grid;place-items:center}.sign__brand[_ngcontent-%COMP%]:focus-visible{box-shadow:var(--focus-ring);outline:none}.sign__logo[_ngcontent-%COMP%]{display:block;margin-inline:auto}.sign__logo--img[_ngcontent-%COMP%]{max-inline-size:320px;block-size:auto;object-fit:contain}.sign__logo--icon[_ngcontent-%COMP%]{inline-size:clamp(120px,20vw,260px);block-size:auto}.sign__card[_ngcontent-%COMP%]{position:relative;inline-size:100%;max-inline-size:420px;background:var(--c-bg-secondary);padding:var(--sp-7);display:flex;flex-direction:column;gap:var(--sp-4)}.sign__theme[_ngcontent-%COMP%]{position:absolute;top:var(--sp-3);right:var(--sp-3);inline-size:36px;block-size:36px;display:grid;place-items:center;border:0;background:transparent;color:var(--c-text-secondary);cursor:pointer;transition:color var(--motion) var(--easing)}.sign__theme[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:22px}.sign__theme[_ngcontent-%COMP%]:hover{color:var(--c-primary)}.sign__title[_ngcontent-%COMP%]{margin:0;color:var(--c-text-secondary)}.sign__fields[_ngcontent-%COMP%]   .winput__field[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--c-border);border-radius:var(--b-radius);color:var(--c-text-secondary);transition:border-color var(--motion) var(--easing)}.sign__fields[_ngcontent-%COMP%]   .winput__field[_ngcontent-%COMP%]:focus-within{border-color:var(--c-primary)}.sign__fields[_ngcontent-%COMP%]   .wbutton[_ngcontent-%COMP%]{min-block-size:42px;border-radius:var(--b-radius-btn);font-weight:600}@media(max-width:991.9px){.sign[_ngcontent-%COMP%]{--cols: 1;grid-template-rows:25% 75%}.sign__col[_ngcontent-%COMP%]{grid-column:1;padding-inline:0}.sign__col--left[_ngcontent-%COMP%]{grid-row:1;align-items:flex-end;justify-content:center;padding-bottom:var(--sp-4)}.sign__col--right[_ngcontent-%COMP%]{grid-row:2;align-items:flex-start;justify-content:center;padding-top:var(--sp-4)}}"],changeDetection:0})}}return i})();export{ge as SignComponent};
