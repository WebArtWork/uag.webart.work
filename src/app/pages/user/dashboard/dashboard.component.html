<div class="space" [class.space--open]="isMenuOpen()">
	<!-- Header (mobile only) -->
	<header class="space__header" aria-label="Page header">
		<div class="space__header-left">
			<user-preview></user-preview>
		</div>

		<div class="space__header-title">Title header</div>

		<div class="space__header-right">
			<icon-burger
				(updated)="isMenuOpen.set($event)"
				#burger
			></icon-burger>
		</div>
	</header>

	<!-- Sidebar -->
	<aside class="space__sidebar" aria-label="Sidebar">
		<button
			type="button"
			class="space__sidebar-close"
			(click)="burger.toggle()"
			aria-label="Close sidebar"
		>
			<span class="material-icons">close</span>
		</button>

		<div class="space__sidebar-content">
			<div class="space__sidebar-row space__sidebar-row--end">
				<span class="material-icons edit">edit</span>
				<span class="material-icons delete">delete</span>
			</div>

			<div class="space__sidebar-img">
				<img src="assets/default.png" alt="" />
			</div>

			<div class="space__sidebar-title">Title of sidebar...</div>

			<div class="space__sidebar-desc">
				Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint
				molestiae consequatur quae. Modi corporis rem amet tempore
				debitis assumenda minima repellat labore expedita quam. Itaque
				accusamus culpa ullam necessitatibus nisi.
			</div>

			<div class="space__sidebar-row">
				<span class="material-icons">delete</span>
				<span>Hello world</span>
			</div>
		</div>
	</aside>

	<!-- Main -->
	<main class="space__main">
		<page-hero
			title="Build anything faster"
			description="One modular layout to cover product, content, and commerce pages."
			[buttons]="[{ text: 'Get started' }]"
			mediaUrl="assets/default.png"
		></page-hero>

		<div style="padding: 16px; display: grid; gap: 10px; max-width: 560px">
			<button
				type="button"
				(click)="connectKeplr()"
				[disabled]="isConnecting()"
			>
				@if (isConnecting()) { connecting… } @else { connect Keplr }
			</button>

			@if (address()) {
			<div><b>address:</b> {{ address() }}</div>
			<div><b>balance:</b> {{ uag() }} UAG ({{ uuag() }} uuag)</div>

			<div style="display: flex; gap: 8px; flex-wrap: wrap">
				<button type="button" (click)="refreshBalance()">
					refresh balance
				</button>
				<button
					type="button"
					(click)="refreshTransactions()"
					[disabled]="isLoadingTxs()"
				>
					@if (isLoadingTxs()) { loading txs… } @else { refresh txs }
				</button>
			</div>

			<hr />

			<label style="display: grid; gap: 6px">
				<div><b>to wallet</b></div>
				<input
					type="text"
					[value]="toAddress()"
					(input)="toAddress.set(($any($event.target)).value)"
				/>
			</label>

			<label style="display: grid; gap: 6px">
				<div><b>amount (UAG)</b></div>
				<input
					type="text"
					[value]="amountUag()"
					(input)="amountUag.set(($any($event.target)).value)"
				/>
			</label>

			<button type="button" (click)="send()" [disabled]="isSending()">
				@if (isSending()) { sending… } @else { send }
			</button>

			@if (txHash()) {
			<div><b>tx hash:</b> <code>{{ txHash() }}</code></div>
			}

			<hr />

			<div style="display: grid; gap: 6px">
				<div><b>transactions</b></div>

				@if (!txs().length) {
				<div style="opacity: 0.7">no transactions found</div>
				} @else {
				<div style="display: grid; gap: 8px">
					@for (t of txs(); track t.hash) {
					<div
						style="
							padding: 10px;
							border: 1px solid #333;
							border-radius: 8px;
						"
					>
						<div style="display: flex; gap: 8px; flex-wrap: wrap">
							<b>
								@if (t.direction === 'in') { in } @else if
								(t.direction === 'out') { out } @else { self }
							</b>
							<span style="opacity: 0.8"
								>height: {{ t.height }}</span
							>
							<span style="opacity: 0.8">
								@if (t.success) { ok } @else { fail }
							</span>
						</div>

						<div style="opacity: 0.9">
							<b>from:</b> <code>{{ t.from }}</code>
						</div>
						<div style="opacity: 0.9">
							<b>to:</b> <code>{{ t.to }}</code>
						</div>

						<div>
							<b>amount:</b> {{ t.amountMinimal }} {{ ' ' }}uuag
						</div>

						@if (t.memo) {
						<div style="opacity: 0.9">
							<b>memo:</b> {{ t.memo }}
						</div>
						}

						<div style="opacity: 0.85">
							<b>hash:</b> <code>{{ t.hash }}</code>
						</div>
						@if (t.timestamp) {
						<div style="opacity: 0.75">{{ t.timestamp }}</div>
						}
					</div>
					}
				</div>
				}
			</div>
			} @if (error()) {
			<div style="color: #ff6b6b"><b>error:</b> {{ error() }}</div>
			}
		</div>
	</main>
</div>
