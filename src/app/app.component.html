<div style="padding: 16px; display: grid; gap: 10px; max-width: 560px">
	<button type="button" (click)="connectKeplr()" [disabled]="isConnecting()">
		@if (isConnecting()) { connecting… } @else { connect Keplr }
	</button>

	@if (address()) {
	<div><b>address:</b> {{ address() }}</div>
	<div><b>balance:</b> {{ uag() }} UAG ({{ uuag() }} uuag)</div>

	<div style="display: flex; gap: 8px; flex-wrap: wrap">
		<button type="button" (click)="refreshBalance()">
			refresh balance
		</button>
		<button
			type="button"
			(click)="refreshTransactions()"
			[disabled]="isLoadingTxs()"
		>
			@if (isLoadingTxs()) { loading txs… } @else { refresh txs }
		</button>
	</div>

	<hr />

	<label style="display: grid; gap: 6px">
		<div><b>to wallet</b></div>
		<input
			type="text"
			[value]="toAddress()"
			(input)="toAddress.set(($any($event.target)).value)"
		/>
	</label>

	<label style="display: grid; gap: 6px">
		<div><b>amount (UAG)</b></div>
		<input
			type="text"
			[value]="amountUag()"
			(input)="amountUag.set(($any($event.target)).value)"
		/>
	</label>

	<button type="button" (click)="send()" [disabled]="isSending()">
		@if (isSending()) { sending… } @else { send }
	</button>

	@if (txHash()) {
	<div><b>tx hash:</b> <code>{{ txHash() }}</code></div>
	}

	<hr />

	<div style="display: grid; gap: 6px">
		<div><b>transactions</b></div>

		@if (!txs().length) {
		<div style="opacity: 0.7">no transactions found</div>
		} @else {
		<div style="display: grid; gap: 8px">
			@for (t of txs(); track t.hash) {
			<div
				style="
					padding: 10px;
					border: 1px solid #333;
					border-radius: 8px;
				"
			>
				<div style="display: flex; gap: 8px; flex-wrap: wrap">
					<b>
						@if (t.direction === 'in') { in } @else if (t.direction
						=== 'out') { out } @else { self }
					</b>
					<span style="opacity: 0.8">height: {{ t.height }}</span>
					<span style="opacity: 0.8">
						@if (t.success) { ok } @else { fail }
					</span>
				</div>

				<div style="opacity: 0.9">
					<b>from:</b> <code>{{ t.from }}</code>
				</div>
				<div style="opacity: 0.9">
					<b>to:</b> <code>{{ t.to }}</code>
				</div>

				<div><b>amount:</b> {{ t.amountMinimal }} {{ ' ' }}uuag</div>

				@if (t.memo) {
				<div style="opacity: 0.9"><b>memo:</b> {{ t.memo }}</div>
				}

				<div style="opacity: 0.85">
					<b>hash:</b> <code>{{ t.hash }}</code>
				</div>
				@if (t.timestamp) {
				<div style="opacity: 0.75">{{ t.timestamp }}</div>
				}
			</div>
			}
		</div>
		}
	</div>
	} @if (error()) {
	<div style="color: #ff6b6b"><b>error:</b> {{ error() }}</div>
	}
</div>

<div>
	<wbutton (click)="sign()">Sign with diia</wbutton>
</div>
