import{a as H,b as $,c as A}from"./chunk-CMVQKBLX.js";import"./chunk-2T5BTVFY.js";import{a as d,b as v,c as k}from"./chunk-OQD6F2VW.js";import{b as L}from"./chunk-CZEJVRH6.js";import"./chunk-QDH4MIVX.js";import{a as V}from"./chunk-IKSPIF3S.js";import"./chunk-3SNXAVZY.js";import"./chunk-RB45GIYM.js";import{a as E}from"./chunk-KR3XK5MS.js";import{a as P,b as U}from"./chunk-LB2I43TM.js";import{l as j}from"./chunk-KRWE5CTW.js";import{C as o,Ga as y,H as x,I as C,Ia as M,Ka as _,Xa as F,Ya as I,aa as u,ca as T,ga as w,ha as D,wa as p,xa as f,ya as h,za as b}from"./chunk-YWXTHJOJ.js";import{h as g}from"./chunk-CIWMVH6F.js";function q(t,l){if(t&1){let e=y();f(0,"language-selector",4),M("wChange",function(a){x(e);let i=_();return C(i.languageService.setLanguageId((a??"")+""))}),h()}if(t&2){let e,n=_();p("wModel",(e=n.languageService.language())==null?null:e._id)("isMutatable",!0)("clearable",!1)}}function z(t,l){if(t&1&&F(0),t&2){let e=l.$implicit;I(e.text)}}function G(t,l){if(t&1&&b(0,"span",5),t&2){let e=l.$implicit;p("translate",e.text)}}var B=(()=>{class t extends j{allowCreate(){return!1}allowUrl(){return!1}update(e){let n=this._languageService.language()?._id??"",a=e._id;if(n){let i=this._translateService.translate(e.text);this._formService.modal(d,{label:"Update",click:(s,m)=>g(this,null,function*(){m();let r=s.translation;i()!==r&&(yield this._translateService.updateTranslation(r,a,n),i.set(r))})},{translation:i()===e.text?"":i(),text:e.text})}else this._alertService.show({text:"Please select language first"})}constructor(e,n){super(d,e,n,"phrase"),this._formService=e,this._phraseService=n,this._translateService=o(U),this.updatableFields=["_id","text"],this._languageService=o(v),this._alertService=o(E),this.columns=["phrase","translation"],this.configType="local",this.config=this.getConfig(),this.languageService=o(v),this.config.headerButtons.unshift({icon:"edit",click:()=>{let a=this._languageService.language()?._id??"";if(a){let i=[];for(let s of this._phraseService.getDocs())i.push(this._translateService.translate(s.text)());this._formService.modalDocs(i,"Update translations for "+this._languageService.language()?.name).then(s=>g(this,null,function*(){for(let[m,r]of this._phraseService.getDocs().entries()){let c=s[m];if(c===void 0)continue;let S=this._translateService.translate(r.text);S()!==c&&(yield this._translateService.updateTranslation(c,r._id,a),S.set(c))}}))}else this._alertService.show({text:"Please select language first"})}}),this.setDocuments()}static{this.\u0275fac=function(n){return new(n||t)(u(L),u(P))}}static{this.\u0275cmp=T({type:t,selectors:[["ng-component"]],features:[w],decls:4,vars:3,consts:[["title","Translates",3,"rows","columns","config"],["tableHeader",""],["cell","phrase"],["cell","translation"],[3,"wChange","wModel","isMutatable","clearable"],[3,"translate"]],template:function(n,a){n&1&&(f(0,"wtable",0),D(1,q,1,3,"ng-template",1)(2,z,1,1,"ng-template",2)(3,G,1,1,"ng-template",3),h()),n&2&&p("rows",a.documents())("columns",a.columns)("config",a.config)},dependencies:[A,k,H,$,V],encapsulation:2,changeDetection:0})}}return t})();var le=[{path:"",component:B}];export{le as routes};
