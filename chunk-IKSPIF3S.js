import{a as we,c as Me}from"./chunk-3SNXAVZY.js";import{b as xe}from"./chunk-LB2I43TM.js";import{a as Ce,k as fe,m as be,p as ve}from"./chunk-KRWE5CTW.js";import{Ab as he,C as P,Fa as J,G as ie,Ga as S,H as b,I as v,Ia as x,Jb as ge,K as ne,Ka as a,O as j,P as E,Qa as re,Sa as se,T as oe,Ta as Q,Va as y,Xa as _,Y as o,Ya as B,Za as F,_ as k,ca as le,cb as ce,db as w,ea as L,eb as h,fb as de,ha as R,ib as _e,jb as pe,kb as me,ob as M,pb as O,qa as g,qb as H,ra as C,rb as z,ta as ae,tb as A,ua as W,va as q,vb as ue,wa as N,wb as p,x as te,xa as r,ya as c,yb as U}from"./chunk-YWXTHJOJ.js";var ye=(()=>{class t{constructor(){this.translate=p(),this._el=P(oe),this._translateService=P(xe),this._inj=P(ne)}ngOnInit(){let e=this._el.nativeElement.textContent??"";ie(this._inj,()=>{E(()=>{let i=this._translateService.translate(this.translate()||e);this._el.nativeElement.textContent=i()})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=L({type:t,selectors:[["","translate",""]],inputs:{translate:[1,"translate"]}})}}return t})();var f={disabled:!1,clearable:!1,placeholder:"",multiple:!1,bindLabel:"name",bindValue:"_id",label:"",searchable:!1,searchableBy:"name",items:[],buttons:[]};var K=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=L({type:t,selectors:[["","wselectView",""]]})}}return t})(),X=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=L({type:t,selectors:[["","wselectItem",""]]})}}return t})(),Y=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=L({type:t,selectors:[["","wselectSearch",""]]})}}return t})();var De=()=>[],ke=t=>({item:t}),Ie=(t,l)=>l.icon||l.text,Ve=(t,l)=>l().id;function Pe(t,l){if(t&1&&(r(0,"div",4),_(1),M(2,"translate"),c()),t&2){a();let e=h(1);o(),B(O(2,1,e)())}}function Le(t,l){if(t&1&&(r(0,"div"),_(1),M(2,"translate"),c()),t&2){a(3);let e=h(0);o(),B(O(2,1,e)())}}function Ee(t,l){t&1&&(r(0,"span"),_(1,", "),c())}function Ne(t,l){if(t&1){let e=S();r(0,"span"),_(1),M(2,"translate"),r(3,"i",14),x("click",function(){b(e);let n=a().$index,s=a(3);return v(s.removeItem(n))}),_(4,"close"),c()()}if(t&2){let e=a().$implicit,i=a(3);o(),F(" ",O(2,1,i.allItem[e])()," ")}}function Be(t,l){if(t&1&&(r(0,"span"),g(1,Ee,2,0,"span"),g(2,Ne,5,3,"span"),c()),t&2){let e=l.$implicit,i=l.$index,n=a(3);o(),C(i&&n.allItem[e]?1:-1),o(),C(n.allItem[e]?2:-1)}}function Fe(t,l){if(t&1&&(r(0,"div",13),g(1,Le,3,3,"div"),W(2,Be,3,2,"span",null,ae),c()),t&2){a(2);let e=h(3);o(),C(e.length?-1:1),o(),q(e)}}function Ae(t,l){if(t&1&&(r(0,"div",13),_(1),M(2,"translate"),c()),t&2){let e=a(2),i=h(0),n=h(4);o(),F(" ",O(2,1,n?e.allItem[n]:i)()," ")}}function $e(t,l){if(t&1&&(r(0,"div",12),g(1,Fe,4,1,"div",13)(2,Ae,3,3,"div",13),c()),t&2){a();let e=h(2);o(),C(e?1:2)}}function je(t,l){if(t&1){let e=S();r(0,"div",10),x("click",function(){b(e);let n=a();return v(n.clear())}),_(1,"close"),c()}}function Re(t,l){if(t&1){let e=S();r(0,"i",17),x("click",function(){b(e);let n=a().$implicit;return v(n.click())}),_(1),c()}if(t&2){let e=a().$implicit;y("_disabled-btn",e.disabled),o(),B(e.icon)}}function We(t,l){if(t&1){let e=S();r(0,"span",18),x("click",function(){b(e);let n=a().$implicit;return v(n.click())}),_(1),c()}if(t&2){let e=a().$implicit;y("_disabled-btn",e.disabled),o(),B(e.text)}}function qe(t,l){if(t&1&&g(0,Re,2,3,"i",15)(1,We,2,3,"span",16),t&2){let e=l.$implicit;C(e.icon?0:e.text?1:-1)}}function Je(t,l){if(t&1){let e=S();r(0,"winput",23),M(1,"translate"),x("wChange",function(n){b(e);let s=a(3);return v(s.search.set((n??"")+""))}),c()}t&2&&N("placeholder",de(O(1,3,"Enter search text...")()))("focused",!0)}function Qe(t,l){if(t&1&&(r(0,"div"),J(1,8),R(2,Je,2,5,"ng-template",null,2,z),c()),t&2){let e=Q(3),i=a(2);o(),N("ngTemplateOutlet",i.searchTpl()||e)}}function ze(t,l){if(t&1&&J(0,21),t&2){let e=l.$implicit;a();let i=Q(9),n=a();N("ngTemplateOutlet",n.itemTpl()||i)("ngTemplateOutletContext",me(2,ke,e))}}function Ue(t,l){t&1&&(r(0,"div",22),_(1," Nothing was found "),c())}function Ge(t,l){if(t&1&&(_(0),M(1,"translate")),t&2){let e=a().item,i=a(2);F(" ",O(1,1,e()[i.bindLabel()])()," ")}}function He(t,l){t&1&&(_(0),M(1,"translate")),t&2&&F(" ",O(1,1,"Unknown item")()," ")}function Ke(t,l){if(t&1){let e=S();r(0,"div",24),x("click",function(){let n=b(e).item,s=a(2);return v(s.selectOption(n()))}),r(1,"div",25),g(2,Ge,2,3)(3,He,2,3),c()()}if(t&2){let e=l.item,i=a(2),n=h(2),s=h(3),m=e().id;o(),y("selected",n?s.includes(m):!1),o(),C(e()[i.bindLabel()]?2:3)}}function Xe(t,l){if(t&1&&(r(0,"div",19),g(1,Qe,4,1,"div"),r(2,"div",20),W(3,ze,1,4,"ng-container",21,Ve),M(5,"search"),g(6,Ue,2,0,"div",22),M(7,"search"),c(),R(8,Ke,4,3,"ng-template",null,1,z),c()),t&2){let e;a();let i=h(5),n=h(6),s=h(7),m=h(8);y("_search",i),o(),C(i?1:-1),o(2),q(H(5,4,n,m,s+" __search")),o(3),C((e=H(7,8,n,m,s+" __search"))!=null&&e.length?-1:6)}}var ht=(()=>{class t{constructor(){this.disabled=p(f.disabled),this.clearable=p(f.clearable),this.placeholder=p(f.placeholder),this.multiple=p(f.multiple),this.bindLabel=p(f.bindLabel),this.bindValue=p(f.bindValue),this.label=p(f.label),this.searchable=p(f.searchable),this.searchableBy=p(f.searchableBy),this.items=p(f.items),this.buttons=p(f.buttons),this.viewTpl=U(K,{read:k}),this.itemTpl=U(X,{read:k}),this.searchTpl=U(Y,{read:k}),this.wModel=he(null,{alias:"wModel"}),this.wChange=ue(),this._core=P(fe),this.allItem={},this.allItems=j(this._core.toSignalsArray([])),this.showOptions=j(!1),this.search=j(""),this.isMulti=A(()=>this.multiple()),this._disabledCva=!1,this.isDisabled=A(()=>this.disabled()||this._disabledCva),this.selectedIds=A(()=>{let e=this.wModel();return this.isMulti()?Array.isArray(e)?e:[]:e==null?[]:[e]}),this.selectedId=A(()=>this.selectedIds()[0]??null),this._onChange=()=>{},this._onTouched=()=>{},E(()=>{let e=this.items(),i=this.bindLabel(),n=this.bindValue(),s=this.searchableBy();for(let u of Object.keys(this.allItem))delete this.allItem[u];let m=e.map(u=>{let d=u;if(typeof u=="function")try{d=u()}catch{d=u}let I,V;if(typeof d=="string"||typeof d=="number"||typeof d=="boolean")I=d,V=String(d);else if(d&&typeof d=="object"){let D=d;I=D[n]??D._id,V=D[i]??D.name??D.title??String(I)}else I=String(d),V=String(d);let Z=V;if(d&&typeof d=="object"&&s){let D=s.split(/\s+/).filter(Boolean),G=[];for(let Te of D){let ee=d[Te];ee!=null&&G.push(String(ee))}G.length&&(Z=G.join(" "))}let Oe={id:I,name:V,__search:Z};return this.allItem[I]=V,Oe});this.allItems.set(this._core.toSignalsArray(m));let $=new Set(this.allItems().map(u=>u().id)),T=this.wModel();if(this.isMulti()){let u=(Array.isArray(T)?T:[]).filter(d=>$.has(d));JSON.stringify(u)!==JSON.stringify(T)&&this.wModel.set(u)}else(!T||this.allItems().length&&!$.has(T))&&this.wModel.set(null)}),E(()=>{let e=this.wModel();this._onChange(e),this.wChange.emit(e)})}toggleOptions(e=!this.showOptions()){this.isDisabled()||this.showOptions.set(e)}selectOption(e){if(this.isMulti()){let i=new Set(this.selectedIds());i.has(e.id)?i.delete(e.id):i.add(e.id),this.wModel.set([...i])}else this.wModel.set(e.id),this.showOptions.set(!1);this._onTouched()}removeItem(e){if(!this.isMulti())return;let i=[...this.selectedIds()];i.splice(e,1),this.wModel.set(i)}clear(){this.wModel.set(this.isMulti()?[]:null)}writeValue(e){this._equal(this.wModel(),e)||this.wModel.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabledCva=e}_equal(e,i){return Array.isArray(e)||Array.isArray(i)?JSON.stringify(e)===JSON.stringify(i):e===i}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=le({type:t,selectors:[["wselect"]],contentQueries:function(i,n,s){i&1&&re(s,n.viewTpl,K,5,k)(s,n.itemTpl,X,5,k)(s,n.searchTpl,Y,5,k),i&2&&se(3)},inputs:{disabled:[1,"disabled"],clearable:[1,"clearable"],placeholder:[1,"placeholder"],multiple:[1,"multiple"],bindLabel:[1,"bindLabel"],bindValue:[1,"bindValue"],label:[1,"label"],searchable:[1,"searchable"],searchableBy:[1,"searchableBy"],items:[1,"items"],buttons:[1,"buttons"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[_e([{provide:Ce,useExisting:te(()=>t),multi:!0}])],decls:24,vars:22,consts:[["defaultView",""],["defaultItem",""],["defaultSearch",""],[1,"wselect",3,"clickOutside"],[1,"wselect__label"],[1,"wselect__body"],[1,"wselect__header",3,"click"],[1,"material-icons"],[3,"ngTemplateOutlet"],[1,"wselect__arrow","material-icons"],[1,"wselect__arrow","material-icons",3,"click"],[1,"wselect__popup",3,"_search"],[1,"wselect__text"],[1,"text-overflow"],[1,"material-icons","avatar__icon",3,"click"],[1,"material-icons",3,"_disabled-btn"],[3,"_disabled-btn"],[1,"material-icons",3,"click"],[3,"click"],[1,"wselect__popup"],[1,"popup-block"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["translate","",1,"popup-block__empty-search"],[3,"wChange","placeholder","focused"],[1,"item",3,"click"],[1,"item__text"]],template:function(i,n){if(i&1){let s=S();ce(0)(1)(2)(3)(4)(5)(6)(7)(8),r(9,"div",3),x("clickOutside",function(){return b(s),v(n.toggleOptions(!1))}),g(10,Pe,3,3,"div",4),r(11,"div",5)(12,"div",6),x("click",function(){return b(s),v(n.toggleOptions())}),r(13,"span",7),_(14,"unfold_more"),c(),J(15,8),R(16,$e,3,1,"ng-template",null,0,z),c(),g(18,je,2,0,"div",9),r(19,"div",10),x("click",function(){return b(s),v(n.toggleOptions())}),_(20," expand_more "),c(),W(21,qe,2,1,null,null,Ie),g(23,Xe,10,12,"div",11),c()()}if(i&2){let s=Q(17),m=n.showOptions();w(n.placeholder()),o();let $=w(n.label());o();let T=w(n.isMulti());o();let u=w(n.selectedIds());o();let d=w(n.selectedId());o(),w(n.searchable()),o(),w(n.allItems()),o(),w(n.searchableBy()),o(),w(n.search()),o(2),C($?10:-1),o(),y("_active",m),o(),y("_disabled",n.isDisabled()),o(3),N("ngTemplateOutlet",n.viewTpl()||s),o(3),C(n.clearable()&&(T?u.length:d)?18:-1),o(),y("_disabled",n.isDisabled())("_active",m),o(2),q(n.buttons()||pe(21,De)),o(2),C(m?23:-1)}},dependencies:[ge,ye,Me,be,ve,we],styles:["[_nghost-%COMP%]{display:block}._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.wselect[_ngcontent-%COMP%]{width:100%}.wselect__label[_ngcontent-%COMP%]{margin-bottom:5px}.wselect__body[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;min-height:50px;height:50px;align-items:center;border:2px solid var(--c-text-primary);border-radius:12px;transition:var(--transition)}.wselect__body._active[_ngcontent-%COMP%]{border-color:var(--c-primary)}.wselect__header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;overflow:hidden;white-space:nowrap;position:relative}.wselect__text[_ngcontent-%COMP%]{margin-right:10px;flex-grow:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.wselect__text[_ngcontent-%COMP%]   .text-overflow[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;word-break:keep-all;color:var(--c-text-primary)}.wselect__arrow[_ngcontent-%COMP%]{transition:var(--transition);display:flex;align-items:center;justify-content:center;border-radius:50%}.wselect__arrow._active[_ngcontent-%COMP%]{transform:rotate(180deg)}.wselect[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--c-text-primary)}.wselect[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:10px;transition:var(--transition);border-bottom:1px solid var(--c-text-primary)}.wselect[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background:var(--c-shadow);border-bottom:1px solid var(--c-primary);color:var(--c-primary)}.wselect__popup[_ngcontent-%COMP%]{z-index:9;width:100%;left:0;position:absolute;top:calc(100% + 10px);background:var(--c-bg-secondary);box-shadow:0 0 4px var(--c-border);border-radius:10px;border:2px solid var(--c-primary);color:var(--c-text-primary);padding:0;overflow:hidden}.wselect__popup[_ngcontent-%COMP%]   .popup-block[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto;padding:8px 15px 10px;margin-right:0}.wselect__popup[_ngcontent-%COMP%]   .popup-block__empty-search[_ngcontent-%COMP%]{padding:10px 0;text-align:center;color:var(--c-text-primary)}.wselect__search[_ngcontent-%COMP%]{padding:8px 15px;border-bottom:1px solid var(--c-border)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px;background-color:var(--c-white)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background-color:var(--c-border)}.selected[_ngcontent-%COMP%]{font-weight:700}._disabled-btn[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}"],changeDetection:0})}}return t})();export{ye as a,f as b,ht as c};
