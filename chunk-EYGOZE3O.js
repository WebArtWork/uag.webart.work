import{a as M}from"./chunk-IKSPIF3S.js";import{a as E}from"./chunk-LKVIN4NJ.js";import{q as I,r as T,s as j,y as k}from"./chunk-KRWE5CTW.js";import{C as n,Ga as S,H as m,I as l,Ia as C,Ka as c,O as u,Xa as d,Y as o,Za as b,ca as v,cb as D,db as x,eb as w,qa as h,ra as _,wa as f,wb as y,xa as s,y as p,ya as a,za as g}from"./chunk-YWXTHJOJ.js";var L=(()=>{class e{constructor(){this._httpService=n(T),this._storeService=n(j),this._emitterService=n(I),this.user=u(void 0),this._set=i=>{i&&(this.user.set(i),this._storeService.setJson("diia",i))},localStorage.getItem("waw_user")?this._load():this._emitterService.onComplete("us.user").subscribe(this._load.bind(this))}sign(i){this._httpService.post("/api/diia/sign",{region:i}).subscribe(this._set.bind(this))}_load(){this._storeService.getJson("diia",i=>{this._set(i)}),this._httpService.get("/api/diia/fetch").subscribe(this._set.bind(this))}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function J(e,U){if(e&1&&(s(0,"div"),d(1),g(2,"span",0),a()),e&2){c();let i=w(0);o(),b(" ",i.name," "),o(),f("translate",i.region)}}function N(e,U){if(e&1){let i=S();s(0,"div")(1,"wbutton",1),C("click",function(){m(i);let r=c();return l(r.diiaService.sign(r.region()))}),d(2,"Sign with diia"),a()()}}var W=(()=>{class e{constructor(){this.diiaService=n(L),this.userService=n(E),this.region=y.required()}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=v({type:e,selectors:[["page-diia"]],inputs:{region:[1,"region"]},decls:3,vars:2,consts:[[3,"translate"],[3,"click"]],template:function(t,r){if(t&1&&(D(0),h(1,J,3,2,"div")(2,N,3,0,"div")),t&2){let V=x(r.diiaService.user());o(),_(V?1:r.userService.user()?2:-1)}},dependencies:[k,M],encapsulation:2,changeDetection:0})}}return e})();export{W as a};
