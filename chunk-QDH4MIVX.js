import{u as D}from"./chunk-KRWE5CTW.js";import{C as u,Ga as x,Gb as z,H as h,I as g,Ia as r,Ka as k,Xa as M,Y as m,ca as C,mb as O,qa as b,ra as w,wa as v,xa as c,y as f,ya as p,za as y}from"./chunk-YWXTHJOJ.js";import{a as i,b as s}from"./chunk-CIWMVH6F.js";var E=(n,_,e,o,t)=>[n,_,e,o,t];function T(n,_){if(n&1){let e=x();c(0,"button",4),r("click",function(){h(e);let t=k();return g(t.close())}),M(1," close "),p()}}var P=(()=>{class n{constructor(){this.closable=!0,this.close=()=>{},this.size="mid",this.panelClass="",this._popStateHandler=e=>this.popStateListener(e)}ngOnInit(){typeof this.onClickOutside!="function"&&(this.onClickOutside=this.close),typeof this.onOpen=="function"&&this.onOpen(),window.addEventListener("popstate",this._popStateHandler)}ngOnDestroy(){window.removeEventListener("popstate",this._popStateHandler)}onBackdropClick(){this.onClickOutside?.()}popStateListener(e){this.close?.()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=C({type:n,selectors:[["lib-modal"]],decls:4,vars:8,consts:[[1,"wacom-modal",3,"click"],[1,"wacom-modal__content",3,"click","ngClass"],[1,"wacom-modal__body"],["type","button",1,"wacom-modal__close","material-icons"],["type","button",1,"wacom-modal__close","material-icons",3,"click"]],template:function(o,t){o&1&&(c(0,"div",0),r("click",function(){return t.onBackdropClick()}),c(1,"div",1),r("click",function(d){return d.stopPropagation()}),y(2,"div",2),b(3,T,2,0,"button",3),p()()),o&2&&(m(),v("ngClass",O(2,E,t.panelClass,t.size==="small"?"wacom-modal__content--small":"",!t.size||t.size==="mid"?"wacom-modal__content--mid":"",t.size==="big"?"wacom-modal__content--big":"",t.size==="full"?"wacom-modal__content--full":"")),m(2),w(t.closable?3:-1))},dependencies:[z],styles:["[_nghost-%COMP%]{position:fixed;inset:0;z-index:9999;display:block}.wacom-modal[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:var(--sp-8);box-sizing:border-box;background-color:#0000008c}.wacom-modal__content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;inline-size:min(960px,100%);max-block-size:90vh;background:var(--c-bg-secondary);border-radius:var(--b-radius-card);box-shadow:0 18px 45px #0009;overflow:hidden}.wacom-modal__content--small[_ngcontent-%COMP%]{inline-size:min(480px,100%)}.wacom-modal__content--big[_ngcontent-%COMP%]{inline-size:min(1200px,100%)}.wacom-modal__content--full[_ngcontent-%COMP%]{inline-size:min(1440px,100%);max-block-size:calc(100vh - 2 * var(--sp-4))}.wacom-modal__body[_ngcontent-%COMP%]{flex:1 1 auto;min-block-size:0;overflow:auto;padding:var(--sp-4);padding-inline-end:calc(var(--sp-4) + 3rem)}.wacom-modal__close[_ngcontent-%COMP%]{position:absolute;inset-block-start:var(--sp-3);inset-inline-end:var(--sp-2);border:0;background:transparent;cursor:pointer;color:var(--c-text-secondary);display:inline-flex;align-items:center;justify-content:center;border-radius:999px;padding:var(--sp-1_5)}.wacom-modal__close[_ngcontent-%COMP%]:hover{background-color:#ffffff0f}@media(max-width:768px){.wacom-modal[_ngcontent-%COMP%]{padding:var(--sp-4)}.wacom-modal__body[_ngcontent-%COMP%]{padding:var(--sp-3);padding-inline-end:calc(var(--sp-3) + 3rem)}}"],changeDetection:0})}}return n})();var S={size:"mid",timeout:0,class:"",panelClass:"",closable:!0};var B=(()=>{class n{constructor(){this._dom=u(D),this._modals=[],this._config=i({},S)}show(e){let o=this._withConfig(e);if(o.unique&&this._modals.find(l=>l.unique===o.unique))return this._modals.find(l=>l.unique===o.unique);this._modals.push(o),o.class||="",o.panelClass||=o.class||"",o.id||=Math.floor(Math.random()*Date.now())+Date.now(),document.body.classList.add("modalOpened");let t,a;o.close=()=>{a?.remove(),a=void 0,t?.remove(),t=void 0,typeof o.onClose=="function"&&o.onClose(),this._modals=this._modals.filter(l=>l.id!==o.id),this._modals.length||document.body.classList.remove("modalOpened")},typeof o.timeout=="number"&&o.timeout>0&&setTimeout(()=>o.close?.(),o.timeout),t=this._dom.appendComponent(P,o);let d=t.nativeElement.children[0].children[0].children[0];return a=this._dom.appendComponent(o.component,o,d),o}open(e){this.show(e)}small(e){this.show(s(i({},e),{size:"small"}))}mid(e){this.show(s(i({},e),{size:"mid"}))}big(e){this.show(s(i({},e),{size:"big"}))}full(e){this.show(s(i({},e),{size:"full"}))}destroy(){for(let e=this._modals.length-1;e>=0;e--)this._modals[e].close?.()}setConfig(e){this._config=i(i({},this._config),e)}_withConfig(e){let t=typeof e=="function"?s(i({},this._config),{component:e}):s(i(i({},this._config),e),{component:e.component});return!t.panelClass&&t.class&&(t.panelClass=t.class),t}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{B as a};
